<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>{{ isAdmin() ? 'All orders' : 'My orders' }}</h2>
    <button class="btn btn-outline-secondary" (click)="load()">Refresh</button>
  </div>
  <div *ngIf="loading()" class="alert alert-info">Loading orders...</div>
  <div *ngIf="error()" class="alert alert-danger">{{ error() }}</div>
  <div class="accordion" id="ordersAccordion">
    <div class="accordion-item" *ngFor="let order of orders(); let i = index">
      <h2 class="accordion-header" id="heading{{ i }}">
        <button
          class="accordion-button collapsed"
          type="button"
          data-bs-toggle="collapse"
          [attr.data-bs-target]="'#collapse' + i"
        >
          Order #{{ order.id }} · {{ order.totalPrice | currency }} · {{ order.orderDate | date : 'short' }}
        </button>
      </h2>
      <div
        [id]="'collapse' + i"
        class="accordion-collapse collapse"
        [attr.aria-labelledby]="'heading' + i"
        data-bs-parent="#ordersAccordion"
      >
        <div class="accordion-body">
          <ul class="list-group list-group-flush">
            <li class="list-group-item" *ngFor="let item of order.items">
              {{ item.product.name }} · {{ item.quantity }} × {{ item.product.price | currency }}
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
